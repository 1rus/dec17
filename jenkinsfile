pipeline {
    agent {
        dockerfile true
    }
    stages {
        stage('checkout scm') {
            steps {
                git url:'https://bitbucket.org/rus_bucket/dec17.git', branch:'dev1'
            }
        }
        stage('test'){
            steps{
                    if (isUnix()) {
                            sh ". /tmp/venv/bin/activate && python -m pytest --junitxml=build/results.xml"
                        } else {
                            bat (/"tmp\venv\scripts\activate" && "python -m pytest --junitxm=build\results.xml"/)
                            }
                        }
                    }
    }
}